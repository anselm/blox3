<!DOCTYPE html>
<html>
<head>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<script src="/libs/three.min.js" crossorigin="anonymous"></script>
<script src='/libs/GLTFLoader.js'></script>
<script src="/libs/Tone.js"></script>
<script src="/socket.io/socket.io.js"></script></head>
<body>


</body>
</html>

<script type="module">

import {Node} from "/system/core/node.js"

async function bootstrap() {

	// ----------------------------------------------------------------------------------------------
	// set up critical core pieces

	let root = Node.root()

	// a 2d display shared between different apps
	root.insert({base:"/system/display/display",name:"display"})

	// a 3d view shared between different apps
	root.insert({base:"/system/3d/render",name:"3d"})

// TODO - these canvases should be the same size and overlaid
// TODO - exercise 3d a bit more

	// ----------------------------------------------------------------------------------------------
	// Add a desktop user interface app that talks to the main display surface

	let desktop = await root.insert({base:"/system/core/app"})
	await desktop.insert({base:"/userland/desktop1"})

// TODO write input systems and a manual input bar

	// ----------------------------------------------------------------------------------------------
	// Add an example user app on the same display surface <- later this can be produced by desktop

// TODO have a desktop that lets a user load this rather than having it show up by itself
// Try reduce priv levels of children

	let app = await root.insert({base:"/system/core/app"})
	await app.insert({base:"/userland/test1"})


	// ----------------------------------------------------------------------------------------------

	// test all

	root.ontick()

}

bootstrap()

</script>


